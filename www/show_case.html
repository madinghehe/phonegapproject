<!doctype html>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>PM2.5 Observe</title>
<link href="css/singlePageTemplate.css" rel="stylesheet" type="text/css">
<!--The following script tag downloads a font from the Adobe Edge Web Fonts server for use within the web page. We recommend that you do not modify it.-->
<script>var __adobewebfontsappname__="dreamweaver"</script>
<script src="http://use.edgefonts.net/source-sans-pro:n2:default.js" type="text/javascript"></script>
<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
  <style type="text/css">
    body, html {
      font-family: sans-serif;
    }
    .arrayItem {
      color: steelblue;
      font-size: 24px;
    }
    #myMap {
      width: 100%;
      height: 500px;
      background-color: gray;
    }
    button {
      width: 200px;
      height: 73px;
      margin-bottom: 50px;
      font-size: 24px;
      border-radius: 10px;
      margin-right: 10px;
    }
  </style>
  <style>
ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
    overflow: hidden;
    background-color: #333;
	
}

li {
    float: left;
	
}

li a, .dropbtn {
    display: inline-block;
    color: white;
    text-align: center;
    padding: 14px 16px;
    text-decoration: none;
}

li a:hover, .dropdown:hover .dropbtn {
    background-color: white;
}

li.dropdown {
    display: inline-block;
	
}

.dropdown-content {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
	z-index:9999;
}

.dropdown-content a {
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
    text-align: left;
	
}

.dropdown-content a:hover {background-color: #f1f1f1}

.show {display:block;}

div.mainContainerMap {
    font-size: 0.8em;
    float: left;
    width: 100%;
    height: 100%;
    min-height: 300px;
    margin: 10px 0 10px 0;
    padding: 0px;
    color: #000000;
    background-color: #fff;
    border: 1px solid #000000;
}
div#leftContentMapWide {
    position: relative;
    float: left;
    height: 100%;
    z-index: 1;
    width: 65%;
    color: #000000;
    margin: 0 10px 0 0;
    padding: 5px;
    border: 0;
}

div#rightContentMapNarrow {
    position: relative;
    float: right;
    width: 30%;
    z-index: 0;
    height: 100%;
    color: #000000;
    margin: 0 0 0 0;
    padding: 5px;
    border: 0;
}

div#footer {
    clear: both;
    margin: 0 0 0 0;
    padding: 10px 10px 5px 10px;
    border: 0;
    height: 145px;
    min-height: 145px;
    width: auto;
    background-color: #d3cfc6;
}
span.contentbanner {
    /* width: 99%; */
    font-size: 1.2em;
    font-weight: bold;
    height: 100%;
    min-height: 20px;
    display: block;
    color: #ffffff;
    padding: 5px;
    margin: 0;
    background-color: #000000;
}
</style>

</head>


<body>
<!-- Main Container -->
<div class="container"> 
  <!-- Navigation -->
  <header> 
    <h4 class="logo">NYC Air</h4>
    
    <body>
      <ul>
        
        
      </ul>
    </body>
  </header>
<!-- Parallax Section -->
  <section class="banner">
    <h2 class="parallax">Urban Obeservatory</h2>
    <p class="parallax_description">The CUSP-UOâ€™s methodologies, instrumentation, and data science capabilities will underpin novel, high-impact science, as well as applications to enhance public well-being, city operations, and future urban design</p>
  </section>
  
  
  <!--navigation bar -->
  
  <body>
<ul>
  <li><a class="active" href="http://cusp.nyu.edu/">CUSP</a></li>
  <li><a href="https://nycopendata.socrata.com/">NYC Open Data</a></li>
  
  <li><a href="https://www.health.ny.gov/">DOH</a></li>
  <li><a href="index.html">Back</a></li>
  <li class="dropdown">
    <a href="javascript:void(0)" class="dropbtn" onclick="dropFunction()">Services</a>
    <div class="dropdown-content" id="myDropdown">
      <a href="#">Mobile Sensors</a>
      <a href="#">Granular Analytics</a>
      <a href="#">Pollution Report</a>
    </div>
  </li>
</ul>
<script>
/* When the user clicks on the button, 
toggle between hiding and showing the dropdown content */
function dropFunction() {
    document.getElementById("myDropdown").classList.toggle("show");
}

// Close the dropdown if the user clicks outside of it
window.onclick = function(e) {
  if (!e.target.matches('.dropbtn')) {

    var dropdowns = document.getElementsByClassName("dropdown-content");
    for (var d = 0; d < dropdowns.length; d++) {
      var openDropdown = dropdowns[d];
      if (openDropdown.classList.contains('show')) {
        openDropdown.classList.remove('show');
      }
    }
  }
}
</script>

</body>



    <header>
    <h4 class="logo" ></h4>

  </header>
  <body>
  
  <div id="mainContainerMap">
  <div id="leftContentMapWide">
  <span class="contentbanner">NYC - Current Observatory Stations</span>
   <div id="myMap"></div>
  </div>
  <div id="rightContentMapNarrow">
  <span class="contentbanner">Spatial Model</span>
  <p> This map shows the pollution data collected by 13 observatory stations in New York City, 
  which is a service to show pollution levels. 
    Based on that, how could we construct a Pollution Index for more granular level. </p>
    <p>
       First, split the 13 stations into two data sets randomly, 9 stations as training data and other 4 as test data. </p>
        
        <button onclick="setTimeout(Split, 1000)">Split it</button>
     

<!--<script>

    function show(a, b){
        
        var pointList = [a, b];
        var firstpolyline = new L.polyline(pointList, {
color: 'red',
weight: 3,
opacity: 0.5,
smoothFactor: 1
});
firstpolyline.addTo(map);
    }
    
aa = [[40.7144,-73.9953], [40.74,-73.8], [40.7,-73.5]]; 
i = 0;  
function myFunction() {
  
    show(aa[i], aa[i+1]);
    i = i+1;
                }    
</script>-->
<script>
    
      function Split(){
          var testdata = myMapData.slice(1,5);
       testdata.forEach(function(element) {    
        var circle = L.circle(element.coord, 1000, {
        color: 'blue',
        fillColor: '#f03',
        fillOpacity: 0.2
       }).addTo(map);
          
      })
                           }
          function Cluster(){
          
       cluster1.forEach(function(element) {    
        var circle = L.circle(element.coord, 1000, {
        color: 'red',
        fillColor: '#f03',
        fillOpacity: 0.2
       }).addTo(map);
          
      }),
             cluster2.forEach(function(element) {    
        var circle = L.circle(element.coord, 1000, {
        color: 'blue',
        fillColor: '#f03',
        fillOpacity: 0.2
       }).addTo(map);
          
      }),
             cluster3.forEach(function(element) {    
        var circle = L.circle(element.coord, 1000, {
        color: 'black',
        fillColor: '#f03',
        fillOpacity: 0.2
       }).addTo(map);
          
      })
                           }
      
      
      
      </script>
  </div>
  </div>

  <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
  <script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
  
  


  <script type="text/javascript">
  
 //4207670144122499 755
  //CartoDB Basemap
  var layer = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png',{
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://cartodb.com/attributions">CartoDB</a>'
  });
  var myMapData = [
    {
      name: "CCNY",
      coord: [40.8194,-73.9500]
    },
    {
      name: "Division Street",
      coord: [40.7144,-73.9953]
    },
	{
      name: "Fresh Kills",
      coord: [40.558654,-74.207118]
    },
	{
      name: "IS 143",
      coord: [40.849082,-73.931085]
    },
	{
      name: "IS 52",
      coord: [40.8158,-73.9019]
    },
	{
      name: "IS 74",
      coord: [40.815561,-73.885509]
    },
	{
      name: "Maspeth",
      coord: [40.727029,-73.893123]
    },
	{
      name: "Morrisania",
      coord: [40.8361,-73.9200]
    },
	{
      name: "Port Richmond",
      coord: [40.6331,-74.1372]
    },
	{
      name: "PS 19",
      coord: [40.7300,-73.9844]
    },
	{
      name: "PS 274",
      coord: [40.694448,-73.927968]
    },
	{
      name: "PS 314",
      coord: [40.6414,-74.0192]
    },
	{
      name: "Queens College",
      coord: [40.7364,-73.8231]
    },
  ]
  
  var cluster1 = [
  	{
      name: "IS 52",
      coord: [40.8158,-73.9019]
    },
      {
      name: "Queens College",
      coord: [40.7364,-73.8231]
    }]
   var cluster2 = [
	{
      name: "Morrisania",
      coord: [40.8361,-73.9200]
    },
	{
      name: "IS 143",
      coord: [40.849082,-73.931085]
    },
    {
      name: "PS 19",
      coord: [40.7300,-73.9844]
    }
    ]
     var cluster3 = [
	{
      name: "Port Richmond",
      coord: [40.6331,-74.1372]
    }
     ]
  
//   //Stamen Watercolor Basemap
//   var Stamen_Watercolor = L.tileLayer('http://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.{ext}', {
//   attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
//   subdomains: 'abcd',
//   minZoom: 1,
//   maxZoom: 16,
//   ext: 'png'
// });



  var central = [40.7560411,-74.0048684]
  var eastRiver = [40.706913,-73.987513];
  var upperWestSide = [40.788129,-73.974509];
  var myZoom = 11;
  //now the fun stuff:  leaflet!
  var map = L.map('myMap').setView(central, myZoom);
  map.addLayer(layer)
  // //Let's add a marker
  // var marker = L.marker([40.768058,-73.981891]).addTo(map);
  // marker.bindPopup("<b>Hello world!</b><br>I am a popup.")
  //Now let's use our custom-made array to make many markers
  
  
// somthing to try


// something to try end

  
  myMapData.forEach(function(element) {    
    
    var marker = L.marker(element.coord).addTo(map);
    marker.bindPopup("<b>Hi! Click the name to show the 5 nearest stations</b><br>This is <b onclick='setTimeout(Cluster, 1000)'>" + element.name + "</b> Observatory Station")
  });
  var panOptions = {
    animate: true,
    duration: 2
  }
   
  </script>
  </body>
    <!-- Hero Section -->
   <body>
  <div id="footer">
    <h2><span class="light"></span></h2>
    <p class="tagline">The Urban Observatory (UO) at NYUâ€™s Center for Urban Science+Progress (CUSP) is a unique user facility for the large-scale observation and analysis of cities.
    The data acquired will be combined with correlative records, in situ, and overhead data to enhance our fundamental understanding of urban infrastructure, environment, and population. </p>
  </div>
  <!-- More Info Section -->
 
  
  <!-- Copyrights Section -->
  <div class="copyright">&copy;2016 - <strong>Ding Ma</strong></div>
  </body>
<!-- Main Container Ends -->
</body>
</html>
